# Select the base docker image
FROM node:latest

# Copy app files to working directory
RUN mkdir -p /app
WORKDIR /app
COPY . /app

# Show current folder structure in logs
RUN ls -al -R

# Install app dependencies
ENV NPM_CONFIG_LOGLEVEL warn
RUN npm install --quiet
RUN npm install pm2 bun -g --quiet


# Build the code
RUN npm run build

EXPOSE 2000

CMD ["pm2-runtime", "start", "pm2.json"]
